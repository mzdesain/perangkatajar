<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Perangkat Ajar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700&family=Times+New+Roman&display=swap');
        
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #0f172a; color: white; }
        .glass-panel { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        input, select, textarea { background: #334155 !important; border: 1px solid #475569 !important; color: white !important; }

        /* PDF Styling - Standar Word Profesional */
        #result-container { font-family: 'Times New Roman', Times, serif; color: black; line-height: 1.5; display: none; }
        
        /* Menghilangkan margin otomatis browser saat cetak */
        @page { size: A4; margin: 0; }

        .page-word { 
            background: white; 
            width: 210mm; 
            min-height: 297mm; 
            padding: 2.54cm 2.54cm 2.54cm 3cm; 
            margin: 10px auto;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            box-sizing: border-box;
            overflow: hidden;
        }

        @media print {
            .no-print { display: none !important; }
            body { background: white; padding: 0; margin: 0; }
            #result-container { display: block !important; }
            .page-word { 
                margin: 0 !important; 
                box-shadow: none !important; 
                width: 210mm;
                height: 297mm;
                page-break-after: always; /* Memastikan halaman berikutnya mulai di kertas baru */
                display: block !important;
            }
            /* Menghilangkan header/footer URL browser */
            body::after { content: none !important; }
        }
    </style>
</head>
<body class="p-4 md:p-10">

    <div class="max-w-6xl mx-auto no-print">
        <header class="mb-10 text-center">
            <h1 class="text-4xl font-extrabold text-emerald-400 mb-2">AI Perangkat Ajar Pro</h1>
            <p class="text-slate-400">Penyusunan Modul Ajar Otomatis & LKPD Profesional</p>
        </header>

        <div class="glass-panel p-8 rounded-3xl space-y-6 shadow-2xl">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="space-y-3">
                    <label class="font-bold text-emerald-400 text-sm italic">Identitas Sekolah</label>
                    <input type="file" id="logo-input" class="w-full text-xs cursor-pointer">
                    <input type="text" id="sekolah" placeholder="Nama Sekolah" class="w-full p-3 rounded-xl outline-none">
                    <input type="text" id="kabupaten" placeholder="Kabupaten / Kota" class="w-full p-3 rounded-xl outline-none">
                </div>
                <div class="space-y-3">
                    <label class="font-bold text-emerald-400 text-sm italic">Personalia</label>
                    <input type="text" id="guru" placeholder="Nama Guru & Gelar" class="w-full p-3 rounded-xl outline-none">
                    <input type="text" id="kepsek" placeholder="Nama Kepala Sekolah" class="w-full p-3 rounded-xl outline-none">
                </div>
                <div class="space-y-3">
                    <label class="font-bold text-emerald-400 text-sm italic">Detail Ajar</label>
                    <input type="text" id="mapel" placeholder="Mata Pelajaran" class="w-full p-3 rounded-xl outline-none text-sm">
                    <input type="text" id="alokasi" placeholder="Alokasi Waktu (e.g. 4x35 Menit)" class="w-full p-3 rounded-xl outline-none text-sm">
                    <input type="number" id="pertemuan" placeholder="Jumlah Pertemuan" class="w-full p-3 rounded-xl outline-none text-sm">
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="font-bold text-emerald-400 block mb-2 text-sm italic">Pilih Jenjang & Kelas</label>
                    <select id="kelas" class="w-full p-3 rounded-xl outline-none text-sm text-white">
                        <option value="">-- Pilih Kelas --</option>
                        <optgroup label="Sekolah Dasar (SD)">
                            <option value="1">Kelas 1 (Fase A)</option><option value="2">Kelas 2 (Fase A)</option>
                            <option value="3">Kelas 3 (Fase B)</option><option value="4">Kelas 4 (Fase B)</option>
                            <option value="5">Kelas 5 (Fase C)</option><option value="6">Kelas 6 (Fase C)</option>
                        </optgroup>
                        <optgroup label="Sekolah Menengah Pertama (SMP)">
                            <option value="7">Kelas 7 (Fase D)</option><option value="8">Kelas 8 (Fase D)</option><option value="9">Kelas 9 (Fase D)</option>
                        </optgroup>
                        <optgroup label="Sekolah Menengah Atas (SMA)">
                            <option value="10">Kelas 10 (Fase E)</option><option value="11">Kelas 11 (Fase F)</option><option value="12">Kelas 12 (Fase F)</option>
                        </optgroup>
                    </select>
                </div>
                <div>
                    <label class="font-bold text-emerald-400 block mb-2 text-sm italic">Praktik Pedagogis</label>
                    <select id="pedagogis" class="w-full p-3 rounded-xl outline-none text-sm">
                        <option value="Pembelajaran Berbasis Masalah (Problem-Based Learning)">Pembelajaran Berbasis Masalah (Problem-Based Learning)</option>
                        <option value="Pembelajaran Berbasis Proyek (Project-Based Learning)">Pembelajaran Berbasis Proyek (Project-Based Learning)</option>
                        <option value="Pembelajaran Inkuiri (Inquiry-Based Learning)">Pembelajaran Inkuiri (Inquiry-Based Learning)</option>
                        <option value="Pembelajaran Kontekstual (Contextual Teaching and Learning)">Pembelajaran Kontekstual (Contextual Teaching and Learning)</option>
                        <option value="Pembelajaran Kooperatif (Cooperative Learning)">Pembelajaran Kooperatif (Cooperative Learning)</option>
                        <option value="Pembelajaran Berdiferensiasi (Differentiated Learning)">Pembelajaran Berdiferensiasi (Differentiated Learning)</option>
                    </select>
                </div>
            </div>

            <div>
                <label class="font-bold text-emerald-400 block mb-4 text-center text-sm italic uppercase tracking-widest">Dimensi Profil Lulusan</label>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 bg-slate-800/50 p-6 rounded-2xl border border-slate-700 text-[11px]">
                    <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" name="profil" value="Keimanan dan Ketakwaan terhadap Tuhan YME" checked> Keimanan & Taqwa</label>
                    <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" name="profil" value="Kewargaan" checked> Kewargaan</label>
                    <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" name="profil" value="Kreativitas" checked> Kreativitas</label>
                    <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" name="profil" value="Penalaran Kritis" checked> Penalaran Kritis</label>
                    <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" name="profil" value="Kemandirian" checked> Kemandirian</label>
                    <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" name="profil" value="Kolaborasi" checked> Kolaborasi</label>
                    <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" name="profil" value="Komunikasi" checked> Komunikasi</label>
                    <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" name="profil" value="Kesehatan" checked> Kesehatan</label>
                </div>
            </div>

            <div class="pt-4">
                <input type="text" id="bab" placeholder="Ketik Nama BAB atau Topik Materi..." class="w-full p-4 rounded-2xl outline-none text-xl border-2 border-emerald-500 font-bold mb-4">
                <button onclick="generateLongDoc()" class="w-full bg-emerald-500 hover:bg-emerald-600 py-4 rounded-2xl font-bold text-xl transition shadow-lg active:scale-95">
                    <i class="fa-solid fa-file-pdf mr-2"></i> GENERATE MODUL LENGKAP
                </button>
            </div>
        </div>
    </div>

    <footer class="no-print mt-10 py-10 border-t border-slate-800 text-center">
        <div class="flex justify-center gap-8 mb-4 text-2xl text-slate-500">
            <a href="#"><i class="fa-brands fa-instagram"></i></a>
            <a href="#"><i class="fa-brands fa-tiktok"></i></a>
            <a href="#"><i class="fa-brands fa-whatsapp"></i></a>
            <a href="https://muzanni.my.id"><i class="fa-solid fa-globe"></i></a>
        </div>
        <p class="text-[10px] tracking-[0.5em] font-bold text-slate-600 uppercase">Created by Muzanni</p>
    </footer>

    <div id="result-container">
        <div class="page-word" id="p1"></div>
        <div class="page-word" id="p2"></div>
        <div class="page-word" id="p3"></div>
    </div>

    <script>
        let logoData = null;
        document.getElementById('logo-input').onchange = (e) => {
            const r = new FileReader();
            r.onload = () => logoData = r.result;
            r.readAsDataURL(e.target.files[0]);
        };

        function generateLongDoc() {
            const d = {
                guru: document.getElementById('guru').value || "Muzanni, S.H.",
                kepsek: document.getElementById('kepsek').value || "....................",
                sekolah: document.getElementById('sekolah').value || "Nama Satuan Pendidikan",
                kab: document.getElementById('kabupaten').value || "KABUPATEN/KOTA",
                mapel: document.getElementById('mapel').value || "MATA PELAJARAN",
                bab: document.getElementById('bab').value || "JUDUL MATERI",
                alokasi: document.getElementById('alokasi').value || "4 x 35 Menit",
                pertemuan: document.getElementById('pertemuan').value || "2",
                kelas: document.getElementById('kelas').value,
                pedagogis: document.getElementById('pedagogis').value,
                profil: Array.from(document.querySelectorAll('input[name="profil"]:checked')).map(cb => cb.value).join(", ")
            };

            if(!d.bab || !d.kelas) return alert("Pilih Jenjang & Isi Materi!");
            document.getElementById('result-container').style.display = 'block';

            // HALAMAN 1: IDENTITAS & KOMPONEN INTI
            document.getElementById('p1').innerHTML = `
                <div style="border-bottom: 3px solid black; padding-bottom: 10px; margin-bottom: 30px; display: flex; align-items: center; gap: 20px;">
                    ${logoData ? `<img src="${logoData}" style="width: 80px; height: 80px; object-fit: contain;">` : `<div style="width: 80px; height: 80px; background: #eee;"></div>`}
                    <div style="text-align: center; flex: 1;">
                        <h1 style="font-size: 14pt; font-weight: bold; margin: 0;">MODUL AJAR KURIKULUM MERDEKA</h1>
                        <h2 style="font-size: 12pt; font-weight: bold; margin: 0;">${d.sekolah.toUpperCase()}</h2>
                        <p style="font-size: 10pt; font-style: italic; margin: 0;">Wilayah ${d.kab.toUpperCase()}, Tahun Pelajaran 2025/2026</p>
                    </div>
                </div>

                <h3 style="font-size: 11pt; font-weight: bold; text-decoration: underline; margin-bottom: 15px;">I. INFORMASI UMUM</h3>
                <table style="width: 100%; font-size: 11pt; border-collapse: collapse; margin-bottom: 25px;">
                    <tr><td style="width: 35%; padding-bottom: 5px;">a. Nama Penyusun</td><td>: ${d.guru}</td></tr>
                    <tr><td style="padding-bottom: 5px;">b. Satuan Pendidikan</td><td>: ${d.sekolah}</td></tr>
                    <tr><td style="padding-bottom: 5px;">c. Jenjang / Kelas</td><td>: ${d.kelas}</td></tr>
                    <tr><td style="padding-bottom: 5px;">d. Mata Pelajaran</td><td>: ${d.mapel}</td></tr>
                    <tr><td style="padding-bottom: 5px;">e. Alokasi Waktu</td><td>: ${d.alokasi} (${d.pertemuan} Pertemuan)</td></tr>
                    <tr><td style="padding-bottom: 5px;">f. Profil Lulusan</td><td>: ${d.profil}</td></tr>
                </table>

                <h3 style="font-size: 11pt; font-weight: bold; text-decoration: underline; margin-bottom: 15px;">II. KOMPONEN INTI</h3>
                <p><strong>1. Capaian Pembelajaran (CP)</strong></p>
                <p style="text-align: justify; margin-left: 20px; font-size: 11pt;">Peserta didik mampu memahami konsep dasar materi ${d.bab} dan mengimplementasikan praktik pedagogis berbasis ${d.pedagogis}.</p>
                
                <p style="margin-top: 15px;"><strong>2. Pertanyaan Pemantik (Otomatis)</strong></p>
                <ul style="margin-left: 45px; list-style-type: disc; font-size: 11pt;">
                    <li>Mengapa kita perlu mempelajari ${d.bab} dalam kehidupan sehari-hari?</li>
                    <li>Bagaimana kaitan antara ${d.bab} dengan dimensi ${d.profil}?</li>
                </ul>
                
                <p style="margin-top: 15px;"><strong>3. Tujuan Pembelajaran (TP)</strong></p>
                <ul style="margin-left: 45px; list-style-type: circle; font-size: 11pt;">
                    <li>Peserta didik dapat menjelaskan pengertian dan konsep dasar ${d.bab}.</li>
                    <li>Peserta didik mampu menganalisis fenomena nyata terkait ${d.bab}.</li>
                </ul>
            `;

            // HALAMAN 2: LANGKAH PEMBELAJARAN
            document.getElementById('p2').innerHTML = `
                <h3 style="font-size: 11pt; font-weight: bold; text-decoration: underline; margin-bottom: 15px;">III. KEGIATAN PEMBELAJARAN</h3>
                <div style="margin-left: 20px; font-size: 11pt;">
                    <p><strong>A. Pendahuluan (15 Menit)</strong></p>
                    <ul style="margin-left: 25px; list-style-type: lower-alpha;">
                        <li>Guru membuka pelajaran dengan doa dan absensi siswa.</li>
                        <li>Apersepsi: Guru memberikan pertanyaan pemantik terkait materi ${d.bab}.</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>B. Kegiatan Inti (70 Menit)</strong></p>
                    <ul style="margin-left: 25px; list-style-type: lower-alpha;">
                        <li>Siswa mengeksplorasi materi ${d.bab} melalui metode ${d.pedagogis}.</li>
                        <li>Diskusi kelompok untuk pemecahan masalah sesuai dimensi ${d.profil}.</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>C. Penutup (15 Menit)</strong></p>
                    <ul style="margin-left: 25px; list-style-type: lower-alpha;">
                        <li>Refleksi bersama dan penarikan kesimpulan materi ${d.bab}.</li>
                        <li>Guru memberikan penguatan dan tugas mandiri (LKPD).</li>
                    </ul>
                </div>
                
                <div style="margin-top: 80px; display: flex; justify-content: space-between; text-align: center; font-size: 11pt;">
                    <div style="width: 200px;">
                        <p>Mengetahui,</p>
                        <p style="margin-bottom: 80px;">Kepala Sekolah</p>
                        <p style="font-weight: bold; text-decoration: underline;">${d.kepsek}</p>
                    </div>
                    <div style="width: 250px;">
                        <p>${d.kab}, ${new Date().toLocaleDateString('id-ID', {day:'numeric', month:'long', year:'numeric'})}</p>
                        <p style="margin-bottom: 80px;">Guru Mata Pelajaran</p>
                        <p style="font-weight: bold; text-decoration: underline;">${d.guru}</p>
                    </div>
                </div>
            `;

            // HALAMAN 3: LKPD LENGKAP
            document.getElementById('p3').innerHTML = `
                <div style="border: 2px solid black; padding: 10px; text-align: center; margin-bottom: 30px;">
                    <h2 style="font-weight: bold; margin: 0; font-size: 14pt;">LEMBAR KERJA PESERTA DIDIK (LKPD)</h2>
                    <p style="margin: 0; font-size: 11pt;">Mata Pelajaran: ${d.mapel} | Materi: ${d.bab}</p>
                </div>
                <div style="margin-bottom: 20px; font-size: 11pt;">
                    <p>Nama Siswa : ............................................................</p>
                    <p>Kelas / No : ............................................................</p>
                </div>
                <div style="margin-bottom: 20px;">
                    <h4 style="font-weight: bold; text-decoration: underline; margin-bottom: 10px;">TUGAS ANALISIS MANDIRI</h4>
                    <p style="font-size: 11pt; text-align: justify; margin-bottom: 10px;">1. Berdasarkan pengamatanmu, jelaskan apa manfaat mempelajari materi ${d.bab}?</p>
                    <div style="border: 1px solid black; height: 120px; width: 100%; margin-bottom: 20px;"></div>
                    <p style="font-size: 11pt; text-align: justify; margin-bottom: 10px;">2. Tuliskan kaitan antara materi ${d.bab} dengan dimensi profil ${d.profil}!</p>
                    <div style="border: 1px solid black; height: 150px; width: 100%; margin-bottom: 20px;"></div>
                </div>
                <div style="text-align: right; font-style: italic; font-size: 9pt; margin-top: 50px;">
                    Nilai: ................... | Paraf Guru: ...................
                </div>
            `;

            setTimeout(() => { window.print(); }, 500);
        }
    </script>
</body>
</html>
